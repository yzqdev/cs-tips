import{_ as c,Y as p,Z as o,a1 as n,a2 as a,a0 as t,$ as e,G as i}from"./framework-ae46ee38.js";const l={},r=e('<h1 id="怎样将堆栈追踪信息转换为字符串" tabindex="-1"><a class="header-anchor" href="#怎样将堆栈追踪信息转换为字符串" aria-hidden="true">#</a> 怎样将堆栈追踪信息转换为字符串</h1><h2 id="问题" tabindex="-1"><a class="header-anchor" href="#问题" aria-hidden="true">#</a> 问题</h2><p>将<code>Throwable.getStackTrace()</code>的结果转换为一个字符串来来描述堆栈信息的最简单的方法是什么</p><h3 id="最佳答案" tabindex="-1"><a class="header-anchor" href="#最佳答案" aria-hidden="true">#</a> 最佳答案</h3><p>可以用下面的方法将异常堆栈信息转换为字符串类型。该类在Apache commons-lang-2.2.jar中可以找到： <a href="org.apache.commons.lang.exception.ExceptionUtils.getStackTrace(Throwable)"><code>org.apache.commons.lang.exception.ExceptionUtils.getStackTrace(Throwable)</code></a></p><h3 id="答案二" tabindex="-1"><a class="header-anchor" href="#答案二" aria-hidden="true">#</a> 答案二</h3>',6),u={href:"https://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html#printStackTrace-java.io.PrintWriter-",target:"_blank",rel:"noopener noreferrer"},k=n("code",null,"Throwable.printStackTrace(PrintWriter pw)",-1),d=e(`<div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">StringWriter</span> sw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">PrintWriter</span> pw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span>sw<span class="token punctuation">)</span><span class="token punctuation">;</span>
t<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span>pw<span class="token punctuation">)</span><span class="token punctuation">;</span>
sw<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// stack trace as a string</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="答案三" tabindex="-1"><a class="header-anchor" href="#答案三" aria-hidden="true">#</a> 答案三</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">StringWriter</span> sw <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PrintWriter</span><span class="token punctuation">(</span>sw<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> exceptionAsString <span class="token operator">=</span> sw<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="答案四" tabindex="-1"><a class="header-anchor" href="#答案四" aria-hidden="true">#</a> 答案四</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">stackTraceToString</span><span class="token punctuation">(</span><span class="token class-name">Throwable</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">StringBuilder</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">StackTraceElement</span> element <span class="token operator">:</span> e<span class="token punctuation">.</span><span class="token function">getStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;\\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5),h={href:"http://stackoverflow.com/questions/1149703/how-can-i-convert-a-stack-trace-to-a-string",target:"_blank",rel:"noopener noreferrer"};function v(m,g){const s=i("ExternalLinkIcon");return p(),o("div",null,[r,n("p",null,[a("用 "),n("a",u,[k,t(s)]),a("可以输出堆栈信息：")]),d,n("p",null,[a("stackoverflow链接： "),n("a",h,[a("http://stackoverflow.com/questions/1149703/how-can-i-convert-a-stack-trace-to-a-string"),t(s)])])])}const w=c(l,[["render",v],["__file","how-can-i-convert-a-stack-trace-to-a-string.html.vue"]]);export{w as default};
